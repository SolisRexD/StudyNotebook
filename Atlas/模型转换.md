# pt转onnx
假设我们已经训练完成，获得了`best.pt`
安装onnx库
```
pip install onnx
```
使用export(YOLO官方或者开源作者都有)
```
python export.py --weights best.pt --img 640 --batch 1
```
即可获得相应文件
# onnx转om
om是华为昇腾使用的格式
可以在开发板上转化，但那就太慢了，因此可以使用虚拟机（[参考这个帖子](https://blog.csdn.net/weixin_45816353/article/details/140765125)）
我是在WSL上安装的，Ubuntu20.04，python版本同样是3.8.10，与原贴一致
接着执行
```
sudo apt-get install python3-pip
pip3 install attrs
pip3 install numpy
pip3 install decorator
pip3 install sympy
pip3 install cffi
pip3 install pyyaml
pip3 install pathlib2
pip3 install psutil
pip3 install protobuf
pip3 install scipy
pip3 install requests
pip3 install absl-py
```
在[这个网站](https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/CANN/CANN%207.0.RC1/Ascend-cann-toolkit_7.0.RC1_linux-x86_64.run)，下载CANN，用于转换
之后执行安装于配置
```
chmod +x Ascend-cann-toolkit_7.0.RC1_linux-x86_64.run
./Ascend-cann-toolkit_7.0.RC1_linux-x86_64.run --full
source xxx/ascend-toolkit/set_env.sh
export LD_LIBRARY_PATH=xxx/ascend-toolkit/latest/x86_64-linux/devlib/:$LD_LIBRARY_PATH
```
安装完成后,使用
```
atc --model=best.onnx --framework=5 --output=model --input_format=NCHW --soc_version=Ascend310B4
```
即可完成转换